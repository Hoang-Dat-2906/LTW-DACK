@model IEnumerable<DACK.Models.Product>

@{
    ViewBag.Title = "Tất cả sản phẩm";

}
<main>

    <!-- Product Section Begin -->
    <section class="product spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="shop__product__option">
                        <div class="row">
                            <div class="col-lg-6 col-md-6">
                                <form action="@Url.Action("Index", "Products")" method="get" class="d-flex">
                                    <input type="text" name="searchString" class="form-control" placeholder="Tìm tên sản phẩm..." value="@Request.QueryString["searchString"]" style="height: 45px; margin-right: 10px;">
                                    <button type="submit" class="primary-btn" style="border: none; height: 45px;">Tìm</button>
                                </form>
                            </div>

                            <div class="col-lg-6 col-md-6 text-right">
                                <div class="shop__product__option__right">
                                    <p>Sắp xếp theo giá:</p>
                                    <select onchange="location = this.value;" style="padding: 5px 10px; border: 1/2px solid #ebebeb;">
                                        <option value="@Url.Action("Index", "Products")">Mặc định</option>
                                        <option value="@Url.Action("Index", "Products", new { sortOrder = "price_asc" })">Giá thấp đến cao</option>
                                        <option value="@Url.Action("Index", "Products", new { sortOrder = "price_desc" })">Giá cao đến thấp</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row product__filter">

                @foreach (var item in Model)
                {
                    //var primaryImage = item.ProductImage?.FirstOrDefault(img => img.IsPrimary) ?? item.ProductImage?.FirstOrDefault();
                            <div class="col-lg-3 col-md-6 col-sm-6 col-md-6 col-sm-6 mix new-arrivals">
                                <div class="product__item">
                                    @{
                                        var primaryImage = item.ProductImage.FirstOrDefault(img => img.IsPrimary == true)?? item.ProductImage.FirstOrDefault();
                                    }
                                    <a href="@Url.Action("Details","Products", new { id = item.ProductId })" style="display: block;">
                                        <div class="product__item__pic set-bg" data-setbg="@Url.Content("~/assets/img/product/" + primaryImage.ImageUrl)">
                                            
                                        </div>

                                    </a>
                                    

                                    <div class="product__item__text">
                                        @* 2. Hiển thị tên sản phẩm *@
                                        <h6>@item.ProductName</h6>

                                        @* 3. Đường dẫn thêm vào giỏ hàng *@
                                        <a href="/Cart/AddToCart/@item.ProductId" class="add-cart">+ Add To Cart</a>

                                        <div class="rating">
                                            <i class="fa fa-star-o"></i>
                                            <i class="fa fa-star-o"></i>
                                            <i class="fa fa-star-o"></i>
                                            <i class="fa fa-star-o"></i>
                                            <i class="fa fa-star-o"></i>
                                        </div>

                                        @* 4. Hiển thị giá sản phẩm (định dạng tiền tệ VNĐ hoặc $) *@
                                        <h5>@item.BasePrice.ToString("#,##0") Đ</h5>

                                        <div class="product__color__select">
                                            <label for="pc-@item.ProductId-1">
                                                <input type="radio" id="pc-@item.ProductId-1">
                                            </label>
                                            <label class="active black" for="pc-@item.ProductId-2">
                                                <input type="radio" id="pc-@item.ProductId-2">
                                            </label>
                                            <label class="grey" for="pc-@item.ProductId-3">
                                                <input type="radio" id="pc-@item.ProductId-3">
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            }


                </div>
        </div>
    </section>
    <!-- Product Section End -->

   

</main>@*<h2>Index</h2>

    <p>
        @Html.ActionLink("Create New", "Create")
    </p>
    <table class="table">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.SKU)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.ProductName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Slug)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Description)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.BasePrice)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.IsActive)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CreatedAt)
            </th>
            <th></th>
        </tr>

    @foreach (var item in Model) {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.SKU)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ProductName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Slug)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Description)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.BasePrice)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.IsActive)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.CreatedAt)
            </td>
            <td>
                @Html.ActionLink("Edit", "Edit", new { id=item.ProductId }) |
                @Html.ActionLink("Details", "Details", new { id=item.ProductId }) |
                @Html.ActionLink("Delete", "Delete", new { id=item.ProductId })
            </td>
        </tr>
    }

    </table>*@
